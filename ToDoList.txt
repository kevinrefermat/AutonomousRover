Make it so that everytime you DisableInterrupts and EnableInterrupts that you aren't enableing them if they weren't already enabled when you entered the function.

if ( interrupts are enabled )
{
   interruptsWereEnabled = 1;
}
DisableInterrupts

BLAH BLAH BLAH

if ( interruptsWereEnabled )
{
   EnableInterrupts;
}




Also tidy up all the modules to ensure that each function leaves the state of the machine how it left it except for the explicit reason that function was called.





Code functions that outline use cases. ie. navigateToTarfget
